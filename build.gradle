/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'java-library'
    id 'project-report'
    id 'maven-publish'
    alias(libs.plugins.versioning)
    alias(libs.plugins.release)
}

group = 'csuite-platform-winx64'
version = '1.3.99'
description = 'usb4java'
java.sourceCompatibility = JavaVersion.VERSION_11
java.targetCompatibility = JavaVersion.VERSION_11

tasks.named('wrapper') {
    distributionType = Wrapper.DistributionType.ALL
    gradleVersion = '7.6'
}

java {
//    withJavadocJar()
    withSourcesJar()
}

repositories {
    mavenLocal()

    google()

    mavenCentral()

    maven {
        url = uri('https://oss.sonatype.org/content/repositories/releases')
    }

    maven {
        url = uri('https://oss.sonatype.org/content/repositories/snapshots')
    }

    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    api 'org.usb4java:libusb4java:1.3.0'
    compileOnly 'org.jetbrains:annotations:24.0.1'
    compileOnly 'org.projectlombok:lombok:1.18.26'
    implementation group: 'org.usb4java', name: 'libusb4java', version: '1.3.0', classifier: 'win32-x86-64'
    testImplementation 'junit:junit:4.13.2'
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java

            versionMapping {
                usage('java-api') {
                    fromResolutionOf('runtimeClasspath')
                }
                usage('java-runtime') {
                    fromResolutionResult()
                }
            }

            pom {
                name = Project.getName()
            }
        }
    }
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc).configureEach {
    options.encoding = 'UTF-8'
}
